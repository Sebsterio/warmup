/*! warmup v0.0.1 | (c) 2020 Sebastian Rosloniec | ISC License | git+https://github.com/Sebsterio/warmup.git */
!(function(){const{profile:e}=window.houseConfig,{allMedia:t}=window.houseState,{createYTEmbed:i,createVideo:n,createImage:o,authenticateUser:s}=window.houseApp,a=document.querySelector(".house__panel--edit"),u=a.querySelector(".house__album"),d=a.querySelectorAll(".house__button");function l(i){i.preventDefault();const n=i.target.dataset.action;if("set"===n)localStorage.setItem("manual-backup",JSON.stringify(t));else if("get"===n){const t=JSON.parse(localStorage.getItem("manual-backup"));window.houseApp.loadNewMedia(t),p(),houseApp.firestore.update(e,t)}const o=i.target.value;i.target.value="Done!",setTimeout(()=>{i.target.value=o},1e3)}function r(i){if(i.target.classList.contains("house__media-info--show-url"))return void this.classList.toggle("house--url-expanded");const n=t.find(e=>e.id+""===this.dataset.id);i.target.classList.contains("house__media-info--delete")?(this.parentElement.removeChild(this),(function(e){const i=t.filter(t=>t!==e);t.length=0,t.push(...i)})(n),houseApp.firestore.update(e,t)):i.target.classList.contains("house__input")&&(!(function(e,t){const i=e.target.name,n=e.target.checked;t[i]=n})(i,n),houseApp.firestore.update(e,t))}const c=e=>`\n\t<div class="house__media-thumbnail">${(({type:e,link:t,ratio:s})=>{switch(e){case"image":return o(t);case"video":return n(t);case"YT embed":return i(t,s,{offsetHeight:200});default:return""}})(e)}</div>\n`,h=(e,t)=>`<p class="house__media-info-row house__label">${e?e+": ":""}${t}</p>`,_=(e,t,i,n)=>`<div class="house__media-info-row house__checkbox-container">\n\t\t\t<input ${i?"checked":""} id="house__input--${n+e}" class="house__input" type="checkbox" name="${e}"\n\t\t\t\tvalue="${e}">\n\t\t\t<label for="house__input--${n+e}" class="house__label">${t}</label>\n\t\t</div>`;function p(){u.innerHTML="",houseState.allMedia.map((e,t)=>(function(e,t){const i=document.createElement("div");return i.classList.add("house__media-item"),i.dataset.id=e.id,i.style["--index"]=t,i.innerHTML=c(e)+getInfoHTML(e)+getUrlHTML(e),i})(e,t)).forEach(e=>{u.appendChild(e),e.addEventListener("click",r)})}getInfoHTML=(({id:e,type:t,description:i,ratio:n,priority:o,pinned:s})=>{return'<div class="house__media-info">'+(i?h(null,i):"")+h(null,t)+(n?h("ratio",n):"")+(_("priority","Priority",o,e)+_("pinned","Pinned",s,e))+'\n\t<div class="house__media-info-row house__media-info-buttons house__label">\n\t\t<span class="house__media-info-button house__media-info--show-url">URL</span>\n\t\t<span class="house__media-info-button house__media-info--delete">DELETE</span>\n\t</div></div>'}),getUrlHTML=(({link:e})=>`\n\t\t<div class="house__media-url-container">\n\t\t\t<div class="house__media-url">${e}</div>\n\t\t</div>\n\t`),d.forEach(e=>e.addEventListener("click",l)),window.houseApp.buildAlbum=p})();