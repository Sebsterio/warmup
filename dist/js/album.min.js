/*! warmup v0.0.1 | (c) 2020 Sebastian Rosloniec | ISC License | git+https://github.com/Sebsterio/warmup.git */
!(function(){const{allMedia:e}=window.houseState,{createYTEmbed:t,createVideo:i,createImage:n}=window.houseApp,{profile:o}=window.houseConfig,s=document.querySelector(".house__panel--edit"),a=s.querySelector(".house__album"),u=s.querySelectorAll(".house__button");function d(t){if(t.target.classList.contains("house__media-info--show-url"))return void this.classList.toggle("house--url-expanded");const i=e.find(e=>e.id+""===this.dataset.id);t.target.classList.contains("house__media-info--delete")?(!(function(t){const i=e.filter(e=>e!==t);e.length=0,e.push(...i)})(i),this.parentElement.removeChild(this),houseApp.firestore.update(o,e)):t.target.classList.contains("house__input")&&(!(function(e,t){const i=e.target.name,n=e.target.checked;t[i]=n})(t,i),houseApp.firestore.update(o,e))}function r(t){t.preventDefault();const i=t.target.dataset.action;if("set"===i)localStorage.setItem("manual-backup",JSON.stringify(e));else if("get"===i){const e=JSON.parse(localStorage.getItem("manual-backup"));window.houseApp.loadNewMedia(e),_(),houseApp.firestore.update(o,e)}const n=t.target.value;t.target.value="Done!",setTimeout(()=>{t.target.value=n},1e3)}const l=e=>`\n\t<div class="house__media-thumbnail">${(({type:e,link:o,ratio:s})=>{switch(e){case"image":return n(o);case"video":return i(o);case"YT embed":return t(o,s,{offsetHeight:200});default:return""}})(e)}</div>\n`,c=(e,t)=>`<p class="house__media-info-row house__label">${e}: ${t}</p>`,h=(e,t,i,n)=>`<div class="house__media-info-row house__checkbox-container">\n\t\t\t<input ${i?"checked":""} id="house__input--${n+e}" class="house__input" type="checkbox" name="${e}"\n\t\t\t\tvalue="${e}">\n\t\t\t<label for="house__input--${n+e}" class="house__label">${t}</label>\n\t\t</div>`;function _(){a.innerHTML="",houseState.allMedia.map((e,t)=>(function(e,t){const i=document.createElement("div");return i.classList.add("house__media-item"),i.dataset.id=e.id,i.style["--index"]=t,i.innerHTML=l(e)+getInfoHTML(e)+getUrlHTML(e),i})(e,t)).forEach(e=>{a.appendChild(e),e.addEventListener("click",d)})}getInfoHTML=(({id:e,type:t,description:i,ratio:n,priority:o,pinned:s})=>{return'<div class="house__media-info">'+c("type",t)+(i?c("name",i):"")+(n?c("ratio",n):"")+(h("priority","Priority",o,e)+h("pinned","Pinned",s,e))+'\n\t<div class="house__media-info-row house__media-info-buttons house__label">\n\t\t<span class="house__media-info-button house__media-info--show-url">URL</span>\n\t\t<span class="house__media-info-button house__media-info--delete">DELETE</span>\n\t</div></div>'}),getUrlHTML=(({link:e})=>`\n\t\t<div class="house__media-url-container">\n\t\t\t<div class="house__media-url">${e}</div>\n\t\t</div>\n\t`),u.forEach(e=>e.addEventListener("click",r)),window.houseApp.buildAlbum=_})();