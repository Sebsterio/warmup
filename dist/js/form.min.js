/*! warmup v0.0.1 | (c) 2020 Sebastian Rosloniec | ISC License | git+https://github.com/Sebsterio/warmup.git */
!(function(){const e=document.querySelector(".house__panel--new-link form"),t=e.querySelector("#house__input--type"),r=e.querySelector("#house__input--ratio"),i=e.querySelector("[for=house__input--ratio]"),n=e.querySelector("#house__input--url"),u=e.querySelector(".house__preview--media"),o=e.querySelector(".house__input--submit");function a(e){e?(r.removeAttribute("hidden"),i.removeAttribute("hidden")):(r.setAttribute("hidden",!0),i.setAttribute("hidden",!0))}function d(){"YT embed"===e.type.value?a(!0):a(!1)}function l(e){return e.replace(/[^]+src="/,"").replace(/"[^]+$/,"")}t.addEventListener("input",d),n.addEventListener("input",(function(t){o.setAttribute("disabled",!0);let r=t.target.value;if("image"!==e.type.value)if("video"!==e.type.value){if("YT embed"===e.type.value){const e=l(r);return u.innerHTML=window.createYTEmbed(u,e),void o.removeAttribute("disabled")}}else!(function(e,t){const r=document.createElement("video");r.src=e,r.onloadedmetadata=(e=>t())})(r,()=>{u.innerHTML=`<video class="video" autoplay muted loop src="${r}"></video>`,o.removeAttribute("disabled")});else!(function(e,t){var r=new Image;r.src=e,r.onload=t})(r,()=>{u.innerHTML=`<img src="${r}" alt="preview">`,o.removeAttribute("disabled")})})),o.addEventListener("click",(function(t){t.preventDefault();const r={type:e.type.value,name:e.name.value,link:e.url.value,ratio:e.ratio.value};"YT embed"===e.type.value&&(r.link=l(e.url.value)),window.houseState.currentMedia=[r,...window.houseState.currentMedia],window.houseFirestore.update(window.houseState.currentMedia,()=>{alert("Love shared succesfullly")}),e.reset(),u.innerHTML=""})),d()})();