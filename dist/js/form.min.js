/*! warmup v0.0.1 | (c) 2020 Sebastian Rosloniec | ISC License | git+https://github.com/Sebsterio/warmup.git */
!(function(){const e=document.querySelector(".house__panel--new-link form"),t=e.querySelector("#house__input--type"),i=e.querySelector("#house__input--ratio"),n=e.querySelector("[for=house__input--ratio]"),r=e.querySelector(".house__ratio-display"),u=e.querySelector("#house__input--url"),o=e.querySelector(".house__preview--media"),a=e.querySelector(".house__input--submit");function l(e){e?(i.removeAttribute("hidden"),n.removeAttribute("hidden")):(i.setAttribute("hidden",!0),n.setAttribute("hidden",!0))}function d(e){comments.forEach(t=>{t.classList.contains("house__preview-comment--"+e)?t.removeAttribute("hidden"):t.setAttribute("hidden",!0)})}function s(){"YT embed"===e.type.value?(l(!0),d("embed")):(l(!1),d("source"))}function c(e){return e.replace(/[^]+src="/,"").replace(/"[^]+$/,"")}comments=e.querySelectorAll(".house__preview-comment"),t.addEventListener("input",s),i.addEventListener("input",(function(e){r.innerText=e.target.value})),u.addEventListener("input",(function(t){a.setAttribute("disabled",!0);let i=t.target.value;if("image"!==e.type.value)if("video"!==e.type.value){if("YT embed"===e.type.value){const e=c(i);return o.innerHTML=window.createYTEmbed(o,e),void a.removeAttribute("disabled")}}else!(function(e,t){const i=document.createElement("video");i.src=e,i.onloadedmetadata=(e=>t())})(i,()=>{o.innerHTML=`<video class="video" autoplay muted loop src="${i}"></video>`,a.removeAttribute("disabled")});else!(function(e,t){var i=new Image;i.src=e,i.onload=t})(i,()=>{o.innerHTML=`<img src="${i}" alt="preview">`,a.removeAttribute("disabled")})})),a.addEventListener("click",(function(t){t.preventDefault();const i={type:e.type.value,name:e.name.value,link:e.url.value,ratio:e.ratio.value};"YT embed"===e.type.value&&(i.link=c(e.url.value)),window.houseState.allMedia.push(i),window.houseFirestore.update(window.houseState.allMedia,()=>{alert("Love shared succesfullly")}),e.reset(),o.innerHTML=""})),s()})();