/*! warmup v0.0.1 | (c) 2020 Sebastian Rosloniec | ISC License | git+https://github.com/Sebsterio/warmup.git */
!(function(){const e=document.querySelector(".house__panel--new-link form"),t=e.querySelector("#house__input--type"),r=e.querySelector("#house__input--ratio"),i=e.querySelector("[for=house__input--ratio]"),u=e.querySelector(".house__ratio-display"),n=e.querySelector("#house__input--url"),o=e.querySelector(".house__preview--media"),l=e.querySelector(".house__input--submit"),a=e.querySelectorAll(".house__preview-comment");function d(e){e?(r.removeAttribute("hidden"),i.removeAttribute("hidden")):(r.setAttribute("hidden",!0),i.setAttribute("hidden",!0))}function s(e){a.forEach(t=>{t.classList.contains("house__preview-comment--"+e)?t.removeAttribute("hidden"):t.setAttribute("hidden",!0)})}function c(){"YT embed"===e.type.value?(d(!0),s("embed")):(d(!1),s("source"))}function p(e){return e.replace(/[^]+src="/,"").replace(/"[^]+$/,"")}t.addEventListener("input",c),r.addEventListener("input",(function(e){u.innerText=e.target.value})),n.addEventListener("input",(function(t){l.setAttribute("disabled",!0);let r=t.target.value;if("image"!==e.type.value)if("video"!==e.type.value){if("YT embed"===e.type.value){const e=p(r);return o.innerHTML=window.createYTEmbed(o,e),void l.removeAttribute("disabled")}}else window.houseApp.preloadVideo(r,()=>{o.innerHTML=`<video class="video" autoplay muted loop src="${r}"></video>`,l.removeAttribute("disabled")});else window.houseApp.preloadImage(r,()=>{o.innerHTML=`<img src="${r}" alt="preview">`,l.removeAttribute("disabled")})})),l.addEventListener("click",(function(t){t.preventDefault();const{allMedia:r}=window.houseState;if(!r.length)return;const i={id:r.length,type:e.type.value,name:e.name.value,link:e.url.value};"YT embed"===e.type.value&&(i.link=p(e.url.value),i.ratio=e.ratio.value),r.push(i),1===r.length&&alert("Error code 1. Please tell Seb."),houseApp.firestore.update(r,()=>{alert("Love shared succesfullly")}),e.reset(),o.innerHTML=""})),c()})();