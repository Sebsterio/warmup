/*! warmup v0.0.1 | (c) 2020 Sebastian Rosloniec | ISC License | git+https://github.com/Sebsterio/warmup.git */
!(function(){const e=document.querySelector(".house"),t=e.querySelectorAll(".house__media"),{disableVideo:n,disableImages:o,forceYTEmbeds:i,YT_PARAMS:r,interval:c}=houseConfig;let{disableYTEmbeds:a}=houseConfig;const{allMedia:l}=houseState;let s=[],u=[],d=[];function h(){(s=l.filter((e,t)=>{if(!u.includes(t)&&!d.includes(t))return e})).length||(s=[...l])}function f(e,t,i,r){return"video"!==e||n?"image"!==e||o?"YT embed"!==e||a?"":createYTEmbed(t,i,r):(function(e){return`<img class="image" src="${e}" alt=":)">`})(t):(function(e){return`<video class="video" autoplay muted loop src="${e}"></video>`})(t)}function m(e,t){return t.findIndex(t=>t===e)}function g(e,t){let n,o="";for(;""===o;){s.length||h();const i=Math.floor(Math.random()*s.length);n=s.splice(i,1)[0];const{type:r,link:c,ratio:a}=n;o=f(r,c,a,e);const g=m(n,l);""===o?d.push(g):u[t]=g}return o}function p(){a=!i&&(!(window.innerWidth>800)||houseConfig.disableYTEmbeds)}window.createYTEmbed=function(e,t,n){const o=Math.ceil(n.offsetHeight);t||(t=1.8);const i=e.split("?"),c=i[0].replace("https://www.youtube.com/embed/","").match(/[^\?\/]+/),a=r+"&playlist="+c;return`<div class="embed"><iframe\n\t\t\tdata-ratio="${t}"\n\t\t\twidth="${o*t}px"\n\t\t\theight="${o}px"\n\t\t\tsrc="${i[0]+a}"\n\t\t\tframeborder="0"\n\t\t\tallow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"\n\t\t></iframe></div>`},window.houseFirestore.fetch((function(n){l.push(...n),u.length=t.length,h(),l.length&&t.forEach((e,t)=>{e.innerHTML=g(e,t)}),(function(){if(0===Number(c))return;let e=Math.floor(Math.random()*t.length);setInterval(()=>{const n=t[e];n.innerHTML=g(n,e),++e>=t.length&&(e=0)},Number(c))})(),e.querySelectorAll("video").forEach((e,t)=>{e.currentTime+=5*t}),p()})),window.addEventListener("resize",(function(){t.forEach(e=>{const t=e.querySelector("iframe");if(!t)return;const n=Math.ceil(e.offsetHeight),o=t.dataset.ratio;t.width=n*o,t.height=n}),p()}))})();