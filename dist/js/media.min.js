/*! warmup v0.0.1 | (c) 2020 Sebastian Rosloniec | ISC License | git+https://github.com/Sebsterio/warmup.git */
!(function(){const e=document.querySelector(".house"),i=e.querySelectorAll(".house__media"),{disableVideo:n,disableImages:t,disableYTEmbeds:r,forceYTEmbeds:o,interval:d,ignorePriority:a,ignorePinned:l}=houseConfig,{createYTEmbed:c,createVideo:u,createImage:f,preloadImage:m,preloadVideo:h}=houseApp,{allMedia:s}=houseState;let g=[],p=[];const b=[...i].map(e=>({element:e,media:void 0}));function M(){(g=s.filter(e=>{const i=b.find(i=>!!i.media&&i.media.id===e.id),n=p.includes(e.id);if(!i&&!n)return e})).length||(g=[...s])}function T(e,i){for(let n in i)if(i[n]!==e[n])return!1;const{type:d}=e;if("video"===d&&!n)return!0;if("image"===d&&!t)return!0;if("YT embed"===d){if(o)return!0;if(!r&&window.innerWidth>800)return!0}return!1}function y(e,i){e.media=(function(e){for(;p.length<s.length;){g.length||M();const i=Math.floor(Math.random()*g.length),n=g.splice(i,1)[0];if(T(n,e))return n;p.push(n.id)}})(i),e.media&&(function({link:e,type:i,ratio:n},t){"image"===i&&m(e,()=>{t.innerHTML=f(e)}),"video"===i&&h(e,()=>{t.innerHTML=u(e)}),"YT embed"===i&&(t.innerHTML=c(e,n,t))})(e.media,e.element)}function E(){s.length&&(a||(b.forEach(e=>y(e,{priority:!0})),p=[],M()),b.forEach(e=>{e.media||y(e)}))}window.addEventListener("resize",(function(){b.forEach(e=>{const i=e.element,n=i.querySelector("iframe");if(!n)return;const t=Math.ceil(i.offsetHeight),r=n.dataset.ratio;n.width=t*r,n.height=t})})),window.houseApp.addCollection=function(){M(),E(),(function(){if(0===Number(d))return;let e=Math.floor(Math.random()*b.length);setInterval(()=>{const i=b[e];(l||i.media&&!i.media.pinned)&&y(i),e=e<b.length-1?e+1:0},Number(d))})(),e.querySelectorAll("video").forEach((e,i)=>{e.currentTime+=5*i})}})();