/*! warmup v0.0.1 | (c) 2020 Sebastian Rosloniec | ISC License | git+https://github.com/Sebsterio/warmup.git */
!(function(){const e=document.querySelector(".house"),t=e.querySelectorAll(".house__media"),{disableYTEmbeds:n,disableVideo:i,disableImages:o,YT_PARAMS:r,interval:a}=houseConfig;let c=[],s=[],d=[],l=window.innerWidth;function u(e,t,r,a){return"video"!==e||i?"image"!==e||o?"YT embed"===e&&!n&&l>800?createYTEmbed(a,t,r):"":`<img class="image" src="${t}" alt=":)">`:`<video class="video" autoplay muted loop src="${t}"></video>`}function h(e){(c=e.filter((e,t)=>{if(!s.includes(t)&&!d.includes(t))return e})).length||(c=[...e])}function f(e,t){return t.findIndex(t=>t===e)}function m(e,t){let n,i="";for(;""===i;){c.length||h(e);const o=Math.floor(Math.random()*c.length);n=c.splice(o,1)[0];const{type:r,link:a,ratio:l}=n;i=u(r,a,l,t);const m=f(n,e);""===i?d.push(m):s.push(m)}return i}window.createYTEmbed=function(e,t,n){const i=Math.ceil(e.offsetHeight);n||(n=1.8);const o=t.split("?"),a=o[0].replace("https://www.youtube.com/embed/","").match(/[^\?\/]+/),c=r+"&playlist="+a;return`<div class="embed"><iframe\n\t\t\tdata-ratio="${n}"\n\t\t\twidth="${i*n}px"\n\t\t\theight="${i}px"\n\t\t\tsrc="${o[0]+c}"\n\t\t\tframeborder="0"\n\t\t\tallow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"\n\t\t></iframe></div>`},window.houseFirestore.fetch((function(n){var i;houseState.media=n,h(houseState.media),(i=houseState.media).length&&t.forEach(e=>{e.innerHTML=m(i,e)}),e.querySelectorAll("video").forEach((e,t)=>{e.currentTime+=5*t}),(function(e){let n=Math.floor(Math.random()*t.length);setInterval(()=>{const i=t[n];i.innerHTML=m(e,i),++n>=t.length&&(n=0)},a)})(houseState.media)})),window.addEventListener("resize",(function(){l=window.innerWidth,t.forEach(e=>{const t=e.querySelector("iframe");if(!t)return;const n=Math.ceil(e.offsetHeight),i=t.dataset.ratio;t.width=n*i,t.height=n})}))})();