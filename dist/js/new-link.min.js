/*! warmup v0.0.1 | (c) 2020 Sebastian Rosloniec | ISC License | git+https://github.com/Sebsterio/warmup.git */
!(function(){const e=window.houseConfig.profile,t=document.querySelector(".house__panel--new-link form"),r=t.querySelector("#house__input--type"),i=t.querySelector("#house__input--ratio"),o=t.querySelector("[for=house__input--ratio]"),u=t.querySelector(".house__ratio-display"),n=t.querySelector("#house__input--url"),l=t.querySelector(".house__preview--media"),d=t.querySelector(".house__input--submit"),a=t.querySelectorAll(".house__preview-comment");function s(e){e?(i.removeAttribute("hidden"),o.removeAttribute("hidden")):(i.setAttribute("hidden",!0),o.setAttribute("hidden",!0))}function p(e){a.forEach(t=>{t.classList.contains("house__preview-comment--"+e)?t.removeAttribute("hidden"):t.setAttribute("hidden",!0)})}function c(){"YT embed"===t.type.value?(s(!0),p("embed")):(s(!1),p("source"))}function v(e){return e.replace(/[^]+src="/,"").replace(/"[^]+$/,"")}r.addEventListener("input",c),i.addEventListener("input",(function(e){u.innerText=e.target.value})),n.addEventListener("input",(function(e){d.setAttribute("disabled",!0);let r=e.target.value;if("image"!==t.type.value)if("video"!==t.type.value){if("YT embed"===t.type.value){const e=v(r),i=t.ratio.value;return l.innerHTML=window.createYTEmbed(e,i,l),void d.removeAttribute("disabled")}}else window.houseApp.preloadVideo(r,()=>{l.innerHTML=`<video class="video" autoplay muted loop src="${r}"></video>`,d.removeAttribute("disabled")});else window.houseApp.preloadImage(r,()=>{l.innerHTML=`<img src="${r}" alt="preview">`,d.removeAttribute("disabled")})})),t.addEventListener("submit",(function(r){r.preventDefault();const{allMedia:i}=window.houseState;if(!i.length)return;const o={id:i.length,type:t.type.value,description:t.description.value,link:t.url.value};if("YT embed"===t.type.value&&(o.link=v(t.url.value),o.ratio=t.ratio.value),i.push(o),1===i.length&&alert("Error code 1. Please tell Seb."),!e&&"woods"!==prompt("Warm up in the ... ?"))return void alert("Sorry, wrong password. Feel free to create your own profile.");houseApp.firestore.update(i,e,()=>{alert("Love shared succesfullly")}),t.reset(),l.innerHTML=""})),c()})();